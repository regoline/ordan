{% extends "authenticated_base.html" %}

{% block content %}
<div class="admin-form-container">
    <h2>{{ translations['admin']['edit_npc'] }}</h2>
    
    <form method="POST" action="{{ url_for('game.edit_npc', npc_id=npc.id) }}" class="admin-form">
        <div class="form-group">
            <label for="translation_key">{{ translations['admin']['translation_key'] }}</label>
            <input type="text" id="translation_key" name="translation_key" value="{{ npc.translation_key }}" required class="form-control">
            <small class="form-text text-muted">{{ translations['admin']['npc_key_help'] }}</small>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="level">{{ translations['admin']['level'] }}</label>
                <input type="number" id="level" name="level" min="1" value="{{ npc.level }}" required class="form-control">
            </div>
            <div class="form-group col-md-6">
                <label for="faction">{{ translations['admin']['faction'] }}</label>
                <select id="faction" name="faction" required class="form-control">
                    {% for faction in factions %}
                        <option value="{{ faction }}" {% if faction == npc.faction %}selected{% endif %}>{{ translations['game']['factions'][faction]['name'] }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="healthpoints">{{ translations['admin']['healthpoints'] }}</label>
                <input type="number" id="healthpoints" name="healthpoints" min="1" value="{{ npc.healthpoints }}" required class="form-control">
            </div>
            <div class="form-group col-md-6">
                <label for="max_healthpoints">{{ translations['admin']['max_healthpoints'] }}</label>
                <input type="number" id="max_healthpoints" name="max_healthpoints" min="1" value="{{ npc.max_healthpoints }}" required class="form-control">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="weapon_id">{{ translations['admin']['weapon'] }}</label>
                <select id="weapon_id" name="weapon_id" class="form-control">
                    <option value="">None</option>
                    {% for weapon in weapons %}
                        <option value="{{ weapon.id }}" {% if npc.weapon_id == weapon.id %}selected{% endif %}>{{ weapon.translation_key }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="armor_id">{{ translations['admin']['armor'] }}</label>
                <select id="armor_id" name="armor_id" class="form-control">
                    <option value="">None</option>
                    {% for armor in armors %}
                        <option value="{{ armor.id }}" {% if npc.armor_id == armor.id %}selected{% endif %}>{{ armor.translation_key }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="min_xp">{{ translations['admin']['min_xp'] }}</label>
                <input type="number" id="min_xp" name="min_xp" min="0" value="{{ npc.min_xp }}" required class="form-control">
            </div>
            <div class="form-group col-md-6">
                <label for="max_xp">{{ translations['admin']['max_xp'] }}</label>
                <input type="number" id="max_xp" name="max_xp" min="0" value="{{ npc.max_xp }}" required class="form-control">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="min_gold">{{ translations['admin']['min_gold'] }}</label>
                <input type="number" id="min_gold" name="min_gold" min="0" value="{{ npc.min_gold }}" required class="form-control">
            </div>
            <div class="form-group col-md-6">
                <label for="max_gold">{{ translations['admin']['max_gold'] }}</label>
                <input type="number" id="max_gold" name="max_gold" min="0" value="{{ npc.max_gold }}" required class="form-control">
            </div>
        </div>
        
        <div class="form-group">
            <label for="image">{{ translations['admin']['image'] }}</label>
            <input type="text" id="image" name="image" value="{{ npc.image }}" class="form-control">
            <small class="form-text text-muted">{{ translations['admin']['npc_image_help'] }}</small>
        </div>
        
        <div class="form-group">
            <label for="reputation">{{ translations['admin']['reputation'] }}</label>
            <input type="number" id="reputation" name="reputation" value="{{ npc.reputation }}" class="form-control">
            <small class="form-text text-muted">{{ translations['admin']['npc_reputation_help'] }}</small>
        </div>
        
        <h4>{{ translations['admin']['attributes'] }}</h4>
        <div class="form-row">
            <div class="form-group col-md-3">
                <label for="forca">{{ translations['admin']['forca'] }}</label>
                <input type="number" id="forca" name="forca" step="0.1" min="0" value="{{ npc.forca }}" required class="form-control">
            </div>
            <div class="form-group col-md-3">
                <label for="destreza">{{ translations['admin']['destreza'] }}</label>
                <input type="number" id="destreza" name="destreza" step="0.1" min="0" value="{{ npc.destreza }}" required class="form-control">
            </div>
            <div class="form-group col-md-3">
                <label for="inteligencia">{{ translations['admin']['inteligencia'] }}</label>
                <input type="number" id="inteligencia" name="inteligencia" step="0.1" min="0" value="{{ npc.inteligencia }}" required class="form-control">
            </div>
            <div class="form-group col-md-3">
                <label for="devocao">{{ translations['admin']['devocao'] }}</label>
                <input type="number" id="devocao" name="devocao" step="0.1" min="0" value="{{ npc.devocao }}" required class="form-control">
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary">{{ translations['admin']['update_npc'] }}</button>
        <a href="{{ url_for('game.manage_npcs') }}" class="btn btn-secondary">{{ translations['admin']['cancel'] }}</a>
    </form>
</div>
{% endblock %}
